{% extends 'base.html' %}

{% block title %}Checkout - MyShop{% endblock %}

{% block content %}
<section class="container checkout">
  <h1>Checkout</h1>
  <div class="checkout-grid">
    <form id="checkout-form" class="checkout-form" method="post">
      {% csrf_token %}
      <h2>Shipping details</h2>
      <label for="name">Full name</label>
      <input id="name" name="name" class="chk" required>

      <label for="email">Email (Optional) </label>
      <input id="email" name="email" type="email" class="chk">

      <label for="phone">Phone (Optional) </label>
      <input id="phone" name="phone" class="chk">

      <label for="address">Address</label>
      <input id="address" name="address" class="chk" required>

      <button type="submit" class="btn btn-primary my-3">Place order</button>
      <div id="checkout-msg" role="status" aria-live="polite" style="margin-top:12px"></div>
    </form>


<form method="post" action="{% url 'clear_cart' %}" style="margin-top: 10px;">
  {% csrf_token %}
  <button type="submit" class="btn btn-outline-danger">
    Clear cart
  </button>
</form>

    <div class="order-summary">
      <h2>Your order</h2>

      <ul class="list-group">
      {% for item in cart_items %}
        <li>
          {{ item.qty }} x {{ item.name }} - ${{ item.price|floatformat:2 }}
        </li>
        {% empty %}
        <li>Your cart is empty.</li>
        {% endfor %}
      </ul>
    </div>
    <div class="summary-total">Total: ${{ total|floatformat:2 }}</div>

  </div>
</section>

{% endblock %}
